# Grafana tempo
Grafana Tempo is a high-volume, distributed tracing backend designed to collect, process, and store large amounts of trace data in a cost-efficient manner, without sacrificing query accuracy. Developed by Grafana Labs, Tempo operates with an object storage-first mindset, utilizing cloud-native technologies like Amazon S3, Google Cloud Storage, or Microsoft Azure Blob Storage to store trace data. This design choice allows for the retention of a massive volume of traces at a relatively low cost. Tempo integrates seamlessly with Grafana, enabling users to visualize their trace data alongside metrics and logs within a unified observatory platform. This integration supports a more holistic approach to observability, allowing developers and operators to more easily identify and troubleshoot issues within their systems. Tempo is compatible with various tracing formats, including Jaeger, Zipkin, and OpenTelemetry, making it a versatile and powerful tool in the observability ecosystem.

## Presets
As always the addon supports default configurations installed by the presets.
Presests are not turned on by default, you always need to enable these.
Even when used any of the following can be esailly be overidden by the values object, the following is intended behavior.
- `standardBackend` - Intended to store and query traces, any cluster with this preset enabled is installed with the tempo services, and *optionally* an ingress service with authorization token validation to allow client clusters to send traces.
Thanks to this prest the collector *runing on the same cluster* will be able to configure the OTLP exporter internal service.

- `createSecrets` - When any of the backend (`standardBackend`) presets are enabled combined with this preset, the addon will create random secret, combined with `mirrorSecretsToAllClusters` the secrets will be available on all clusters.


- `mirrorSecretsToAllClusters` - works only combined with `createSecrets`, this preset replecated the secrets to all the clusters.

- `standardClient` - Intended to have what is needed to send traces to the tempo backend. when the `otel-collector` addon is used, thanks to this prest the collector will be able to configure the OTLP exporter to the ingress provided by the `standardBackend` and `createSecrets` including the corresponding authorization token.


## App components
`tempo` - external chart
`ingress` - direct template
`secrets-app` - direct template

### tempo
Is an external chart by grafana, specfiic default version and repo can be found in the values file, it possible to overide to any chart, repo , version.

### ingress
The ingress is a direct template interpulated by this chart.
Defaults and all options can be found on the values file under the `addonValues.grafanaTempoAddon.valuesObject.valuesObject.ingress`

The component uses an ingress object decleartion, innteded to expose an ingress for internal usage between clusters.
The ingress is protected by a random password that my be generated by the `secrets-app`.
When addon installed combined with `otel-collector` addon, the `collector`  automatically configured to send tracing info to the internal ingress (with password) or the internal service if on the same cluster.

### secrets-app
Secrets generated by this app are intended for easy setup of the `tempo` and the `otel-collector` in multi clusters.
There are safer approaches, such as external secrets, these require more setup and configuration and are supported.
The app generates random secret and sync it to the rest of the clusters, to allow easy pickup by the `otel-collector` addon.


